//*****************************************************************************
//
// usb_keyb_structs.c - Data structures defining the USB keyboard device.
//
// Copyright (c) 2008-2020 Texas Instruments Incorporated.  All rights reserved.
// Software License Agreement
// 
// Texas Instruments (TI) is supplying this software for use solely and
// exclusively on TI's microcontroller products. The software is owned by
// TI and/or its suppliers, and is protected under applicable copyright
// laws. You may not combine this software with "viral" open-source
// software in order to form a larger program.
// 
// THIS SOFTWARE IS PROVIDED "AS IS" AND WITH ALL FAULTS.
// NO WARRANTIES, WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT
// NOT LIMITED TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
// A PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. TI SHALL NOT, UNDER ANY
// CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL, OR CONSEQUENTIAL
// DAMAGES, FOR ANY REASON WHATSOEVER.
// 
// This is part of revision 2.2.0.295 of the EK-TM4C123GXL Firmware Package.
//
//*****************************************************************************

#include <stdint.h>
#include <stdbool.h>
#include "inc/hw_types.h"
#include "driverlib/usb.h"
#include "usblib/usblib.h"
#include "usblib/usbhid.h"
#include "usblib/usb-ids.h"
#include "usblib/device/usbdevice.h"
#include "usblib/device/usbdhid.h"
#include "usblib/device/usbdhidkeyb.h"
#include "usb_keyb_structs.h"

#define USB_PID_AUDIO    0x0201
#define USB_PID_PRINTER  0x0202
#define USB_PID_MIDI     0x0203

//****************************************************************************
//
// The languages supported by this device.
//
//****************************************************************************
const uint8_t g_pui8LangDescriptor[] =
{
    4,
    USB_DTYPE_STRING,
    USBShort(USB_LANG_EN_US)
};

//****************************************************************************
//
// The manufacturer string.
//
//****************************************************************************
const uint8_t g_pui8ManufacturerString[] =
{
    (17 + 1) * 2,
    USB_DTYPE_STRING,
    'T', 0, 'e', 0, 'x', 0, 'a', 0, 's', 0, ' ', 0, 'I', 0, 'n', 0, 's', 0,
    't', 0, 'r', 0, 'u', 0, 'm', 0, 'e', 0, 'n', 0, 't', 0, 's', 0,
};

//****************************************************************************
//
// The product string.
//
//****************************************************************************
// Keyboard product string
const uint8_t g_pui8ProductStringKeyboard[] =
{
    (16 + 1) * 2,
    USB_DTYPE_STRING,
    'K', 0, 'e', 0, 'y', 0, 'b', 0, 'o', 0, 'a', 0, 'r', 0, 'd', 0, ' ',
    'D', 0, 'e', 0, 'v', 0, 'i', 0, 'c', 0, 'e', 0
};

// Audio product string
const uint8_t g_pui8ProductStringAudio[] =
{
    (12 + 1) * 2,
    USB_DTYPE_STRING,
    'A', 0, 'u', 0, 'd', 0, 'i', 0, 'o', 0, ' ', 0, 'D', 0, 'e', 0, 'v', 0,
    'i', 0, 'c', 0, 'e', 0
};

// Gamepad product string
const uint8_t g_pui8ProductStringGamepad[] =
{
    (12 + 1) * 2,
    USB_DTYPE_STRING,
    'G', 0, 'a', 0, 'm', 0, 'e', 0, 'p', 0, 'a', 0, 'd', 0, ' ', 0, 'D', 0,
    'e', 0, 'v', 0, 'i', 0, 'c', 0, 'e', 0
};

// Printer product string
const uint8_t g_pui8ProductStringPrinter[] =
{
    (13 + 1) * 2,
    USB_DTYPE_STRING,
    'P', 0, 'r', 0, 'i', 0, 'n', 0, 't', 0, 'e', 0, 'r', 0, ' ', 0, 'D', 0,
    'e', 0, 'v', 0, 'i', 0, 'c', 0, 'e', 0
};

// MIDI product string
const uint8_t g_pui8ProductStringMIDI[] =
{
    (14 + 1) * 2,
    USB_DTYPE_STRING,
    'M', 0, 'I', 0, 'D', 0, 'I', 0, ' ', 0, 'C', 0, 'o', 0, 'n', 0, 't', 0,
    'r', 0, 'o', 0, 'l', 0, 'l', 0, 'e', 0, 'r', 0
};



//****************************************************************************
//
// The serial number string.
//
//****************************************************************************
const uint8_t g_pui8SeriailNumberString[] =
{
    (8 + 1) * 2,
    USB_DTYPE_STRING,
    '1', 0, '2', 0, '3', 0, '4', 0, '5', 0, '6', 0, '7', 0, '8', 0
};

//*****************************************************************************
//
// The interface description string.
//
//*****************************************************************************
const uint8_t g_pui8HIDInterfaceString[] =
{
    (22 + 1) * 2,
    USB_DTYPE_STRING,
    'H', 0, 'I', 0, 'D', 0, ' ', 0, 'K', 0, 'e', 0, 'y', 0, 'b', 0,
    'o', 0, 'a', 0, 'r', 0, 'd', 0, ' ', 0, 'I', 0, 'n', 0, 't', 0,
    'e', 0, 'r', 0, 'f', 0, 'a', 0, 'c', 0, 'e', 0
};

//*****************************************************************************
//
// The configuration description string.
//
//*****************************************************************************
const uint8_t g_pui8ConfigString[] =
{
    (26 + 1) * 2,
    USB_DTYPE_STRING,
    'H', 0, 'I', 0, 'D', 0, ' ', 0, 'K', 0, 'e', 0, 'y', 0, 'b', 0,
    'o', 0, 'a', 0, 'r', 0, 'd', 0, ' ', 0, 'C', 0, 'o', 0, 'n', 0,
    'f', 0, 'i', 0, 'g', 0, 'u', 0, 'r', 0, 'a', 0, 't', 0, 'i', 0,
    'o', 0, 'n', 0
};

//*****************************************************************************
//
// The descriptor string table.
//
//*****************************************************************************
const uint8_t * const g_ppui8StringDescriptorsKeyboard[] =
{
    g_pui8LangDescriptor,
    g_pui8ManufacturerString,
    g_pui8ProductString,
    g_pui8SeriailNumberString,
    g_pui8HIDInterfaceString,
    g_pui8ConfigString
};

#define NUM_STRING_DESCRIPTORS (sizeof(g_ppui8StringDescriptorsKeyboard) /            \
                                sizeof(uint8_t *))

const uint8_t * const g_ppui8StringDescriptorsAudio[] =
{
    g_pui8LangDescriptor,
    g_pui8ManufacturerString,
    g_pui8ProductStringAudio,
    g_pui8SerialNumberString
};
#define NUM_STRING_DESCRIPTORS_AUDIO (sizeof(g_ppui8StringDescriptorsAudio) / sizeof(uint8_t *))

const uint8_t * const g_ppui8StringDescriptorsGamepad[] =
{
    g_pui8LangDescriptor,
    g_pui8ManufacturerString,
    g_pui8ProductStringGamepad,
    g_pui8SerialNumberString
};
#define NUM_STRING_DESCRIPTORS_GAMEPAD (sizeof(g_ppui8StringDescriptorsGamepad) / sizeof(uint8_t *))

const uint8_t * const g_ppui8StringDescriptorsPrinter[] =
{
    g_pui8LangDescriptor,
    g_pui8ManufacturerString,
    g_pui8ProductStringPrinter,
    g_pui8SerialNumberString
};
#define NUM_STRING_DESCRIPTORS_PRINTER (sizeof(g_ppui8StringDescriptorsPrinter) / sizeof(uint8_t *))

const uint8_t * const g_ppui8StringDescriptorsMIDI[] =
{
    g_pui8LangDescriptor,
    g_pui8ManufacturerString,
    g_pui8ProductStringMIDI,
    g_pui8SerialNumberString
};
#define NUM_STRING_DESCRIPTORS_MIDI (sizeof(g_ppui8StringDescriptorsMIDI) / sizeof(uint8_t *))

//*****************************************************************************
//
// The HID keyboard device initialization and customization structures.
//
//*****************************************************************************
// Keyboard Device Structure
tUSBDHIDKeyboardDevice g_sKeyboardDevice;
tUSBDHIDKeyboardDevice g_sKeyboardTemplate =
{
    USB_VID_TI_1CBE,
    USB_PID_KEYBOARD,
    500,
    USB_CONF_ATTR_SELF_PWR | USB_CONF_ATTR_RWAKE,
    KeyboardHandler,       // Your keyboard event handler
    (void *)&g_sKeyboardDevice,
    g_ppui8StringDescriptorsKeyboard,
    NUM_STRING_DESCRIPTORS_KEYBOARD
};

// Gamepad Device Structure
tUSBDHIDGamepadDevice g_sGamepadDevice;
tUSBDHIDGamepadDevice g_sGamepadTemplate =
{
    USB_VID_TI_1CBE,
    USB_PID_GAMEPAD,
    500,
    USB_CONF_ATTR_SELF_PWR | USB_CONF_ATTR_RWAKE,
    GamepadHandler,       // Your gamepad event handler
    (void *)&g_sGamepadDevice,
    g_ppui8StringDescriptorsGamepad,
    NUM_STRING_DESCRIPTORS_GAMEPAD
};

// Audio Device Structure (Placeholder - you must implement USB Audio Class handling)
typedef struct
{
    uint16_t ui16VID;
    uint16_t ui16PID;
    uint16_t ui16MaxPowermA;
    uint8_t  ui8PwrAttributes;
    void (*pfnHandler)(void *pvCBData, uint32_t ui32Event, uint32_t ui32MsgParam, void *pvMsgData);
    void *pvCBData;
    const uint8_t * const *ppui8StringDescriptors;
    uint32_t ui32NumStringDescriptors;
} tUSBAudioDevice;

tUSBAudioDevice g_sAudioDevice;
tUSBAudioDevice g_sAudioTemplate =
{
    USB_VID_TI_1CBE,
    0xAUDIO_PID, // Define appropriate PID
    500,
    USB_CONF_ATTR_SELF_PWR | USB_CONF_ATTR_RWAKE,
    AudioHandler,    // You implement
    (void *)&g_sAudioDevice,
    g_ppui8StringDescriptorsAudio,
    NUM_STRING_DESCRIPTORS_AUDIO
};

// Printer Device Structure (Placeholder - you must implement USB Printer Class handling)
typedef struct
{
    uint16_t ui16VID;
    uint16_t ui16PID;
    uint16_t ui16MaxPowermA;
    uint8_t  ui8PwrAttributes;
    void (*pfnHandler)(void *pvCBData, uint32_t ui32Event, uint32_t ui32MsgParam, void *pvMsgData);
    void *pvCBData;
    const uint8_t * const *ppui8StringDescriptors;
    uint32_t ui32NumStringDescriptors;
} tUSBPrinterDevice;

tUSBPrinterDevice g_sPrinterDevice;
tUSBPrinterDevice g_sPrinterTemplate =
{
    USB_VID_TI_1CBE,
    0xPRINTER_PID, // Define appropriate PID
    500,
    USB_CONF_ATTR_SELF_PWR | USB_CONF_ATTR_RWAKE,
    PrinterHandler,    // You implement
    (void *)&g_sPrinterDevice,
    g_ppui8StringDescriptorsPrinter,
    NUM_STRING_DESCRIPTORS_PRINTER
};

// MIDI Device Structure (HID-based MIDI, Placeholder)
typedef struct
{
    uint16_t ui16VID;
    uint16_t ui16PID;
    uint16_t ui16MaxPowermA;
    uint8_t  ui8PwrAttributes;
    void (*pfnHandler)(void *pvCBData, uint32_t ui32Event, uint32_t ui32MsgParam, void *pvMsgData);
    void *pvCBData;
    const uint8_t * const *ppui8StringDescriptors;
    uint32_t ui32NumStringDescriptors;
} tUSBMIDIDevice;

tUSBMIDIDevice g_sMIDIDevice;
tUSBMIDIDevice g_sMIDITemplate =
{
    USB_VID_TI_1CBE,
    0xMIDI_PID, // Define appropriate PID
    500,
    USB_CONF_ATTR_SELF_PWR | USB_CONF_ATTR_RWAKE,
    MIDIHandler,    // You implement
    (void *)&g_sMIDIDevice,
    g_ppui8StringDescriptorsMIDI,
    NUM_STRING_DESCRIPTORS_MIDI
};
